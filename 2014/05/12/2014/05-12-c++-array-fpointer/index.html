<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 指向数组的指针与指向数组首元素的指针 · Qiyexuxu</title><meta name="description" content="指向数组的指针与指向数组首元素的指针 - David Wang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.keeplearning.group/atom.xml" title="Qiyexuxu"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/abnerwang" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">指向数组的指针与指向数组首元素的指针</h1><div class="tags"><a href="/tags/C/" class="tag-title">#C++</a></div><div class="post-info">May 12, 2014</div><div class="post-content"><p>指向数组的指针与指向数组首元素的指针究竟有什么区别呢？有人说，这二者不是一回事么？它们就是同一个东西啊！然而，事实并非如此，下面我细细道来。</p>
<p>首先，我们定义一个一维数组来具体分析一下，这个数组含有10个整数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ia[<span class="number">10</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>我们再来定义指向这个数组的指针：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (*p)[<span class="number">10</span>] = &amp;ia;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>我们知道，在使用数组名的时候，一般情况下实际使用的都是数组首元素的地址（<code>decltype</code>等少数特殊情况除外，这类操作有其特殊的含义），我们可以这样来理解，<code>ia</code> 相当于一个变量，在这个变量中存放的是数组首元素的地址，即相当于这个变量是指向数组首元素的指针。</p>
<p>我们再回过头来看看指向数组的指针，它是对 <code>ia</code> 取地址，也就是说，<code>ia</code> 相当于一个变量，对 <code>ia</code> 取地址得到的是 <code>ia</code> 的地址，即是数组首元素的指针的地址。</p>
<p>从下图看以上分析过程可以一目了然，从指向数组的指针经过两次解引用后可以得到数组首元素。</p>
<p><img src="http://ww3.sinaimg.cn/mw690/79225320gw1egbiwdj9jfj213y0n90u2.jpg" alt=""></p>
<p>从以上分析过程我们知道：</p>
<p><strong>指向数组的指针本质上是指向数组首元素的地址的指针，由它经过一次解引用后得到指向数组首元素的地址，由它经过两次解引用后得到相应数组的首元素</strong></p>
<p>那么，事实是不是我们以上分析的那样呢？下面我们通过二维数组来分析一下，我们知道，所谓 <strong>二维数组</strong> 实际上指的是 <strong>数组的数组</strong>，如 <code>ia[2][3]</code> 表示的是两个元素个数为 3 的一维数组的数组，二维数组的数组名实际上是这个二维数组首元素的地址，即是这个二维数组的第一个一维数组的地址，由以上分析过程我们知道，某个一维数组的地址实际上是数组首元素指针的地址，由它经过两次解引用后可以得到数组的首元素，基于这个原理，用一个简单的程序来验证以上过程：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ival[<span class="number">3</span>][<span class="number">4</span>] = &#123;</span><br><span class="line">        &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;,</span><br><span class="line">        &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;,</span><br><span class="line">        &#123;<span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> (*i)[<span class="number">4</span>] = ival; i != ival + <span class="number">3</span>; ++i) &#123;  <span class="comment">// i 是指向这个二维数组中第一个一维数组的指针</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> *j = *i; j != *i + <span class="number">4</span>; ++j) <span class="comment">// 对 i 解引用得到的是某个二维数组首元素的地址</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; *j &lt;&lt; <span class="string">' '</span>;  <span class="comment">// 对 j 解引用得到相应的元素</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上程序最后的运行结果为：</p>
<p>0 1 2 3<br>4 5 6 7<br>8 9 10 11</p>
<p>完全符合期望中的结果，由指向某个一维数组的指针得到最后的具体每一个元素经历了两次解引用过程，由此证明我们以上的分析是正确的。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2014/05/13/2014/05-13-android-mac/" class="prev">上一篇</a><a href="/2014/05/06/2014/05-06-c++-const/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'abnerwang';
var disqus_identifier = '2014/05/12/2014/05-12-c++-array-fpointer/';
var disqus_title = '指向数组的指针与指向数组首元素的指针';
var disqus_url = 'http://blog.keeplearning.group/2014/05/12/2014/05-12-c++-array-fpointer/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//abnerwang.disqus.com/count.js" async></script><div class="copyright"><p>© 2014 - 2018 <a href="http://blog.keeplearning.group">David Wang</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>